# MongoDB and CRUD

Please skim through this entire document first. Specific instructions for what to do (and in which order) appear further down.

## Setting the stage

- Clear the stage (close all other terminal tabs, chrome tabs, email etc...).
- Internalize the what and why section (Rationale).
- The goal here is learning to learn, so it is all about the process. There is no rush. Take risks and have fun! Do not be afraid to make mistakes and try new things.
- When you have a hypothesis, come up with a coding experiment that valides or invalidates your theory. If it is sufficiently interesting please keep a copy of it to share with classmates as an exercise.

### Rationale (What and Why):

MongoDB and, more generally, NoSQL databases have risen to recent prominence as the scale of data generated by users of the world wide web has grown, though it is worth noting that NoSQL databases and document stores are not new concepts.

They why is that MongoDB is often a choice of developers and is the M in the widely talked about "MEAN" stack for web development. Additionally, it is a sensible choice for working with JavaScript because JSON objects are easily serialized into and out of BSON, which is a Binary version of JSON. Additionally, MongoDB has high quality, concise documentation that outlines best practices and architecture.

### Objectives:

By the end of this lesson you should be able to:

- Explain what collections and documents are.
- Use MongoDB CRUD operations to persist data.
- Use the MongoDB console and documentation to query data.

### Key terms:

- database
- collection
- document
- CRUD
- query
- aggregation
- data modeling

## Activities

A _database_ is a piece of software that allows for the storage and retrieval of data. Begin exploring what a database is by reading through [MongoDB's NoSQL Explained](https://www.mongodb.com/nosql-explained).

The fundamental unit in MongoDB is the _document_. A document is similar to a JSON document in that it is a set key-value pairs of static values, but differs subtly in that under the covers the data is stored as [BSON](https://en.wikipedia.org/wiki/BSON). Here is an example document:

  ```
  {
    "_id" : ObjectId("555ab45cb6b043a869e60851"),
    "driver" : "Carl",
    "make" : "Nissan",
    "model" : "Xterra",
    "year" : 2005
  }
  ```

Documents are grouped into logical groupings known as _collections_. Another way to think of this is that a collection contains zero or more documents that are related in type. In the example above, the document might belong to a `cars` collection or `drivers` collection.

##### What is CRUD?

CRUD is an acronym that you must memorize, it stands for: *C*reate, *R*ead, *U*pdate, *D*elete. But what is being created, read, updated, and deleted? _Resources_.

A way to think about a resource is that it is a logical entity in the application (or database in this case). A good example to think about is `users`, that is, for each user of the application, a document _representing_ that user is added to the `users` collection.

But how do users enter the database? In the normal web application flow the application will use CRUD to handle the lifecycle for a user record. At the end of the day though, the application is interacting with the CRUD interface _at the database_. This lesson explores the CRUD interface at the database level. Later in the Learning Experiences on Express CRUD will be explored in the context of an application.

The main MongoDB commands to understand for CRUD are:

  1. CREATE [db.collection.insert()](http://docs.mongodb.org/master/reference/method/db.collection.insert/)
  1. READ [db.collection.find()](http://docs.mongodb.org/master/reference/method/db.collection.find/)
  1. UPDATE [db.collection.findAndModify()](http://docs.mongodb.org/master/reference/method/db.collection.findAndModify/) or [db.collection.update()](http://docs.mongodb.org/master/reference/method/db.collection.update/)
  1. DELETE [db.collection.remove()](http://docs.mongodb.org/master/reference/method/db.collection.remove/)

The way to interpret these commands is that for a MongoDB database containing a collection named `foobarskis` a command like `find` would look like:

  ```
  db.foobarskis.find({fooshmarskis: true});
  ```

When speaking in the context of `db.collection.find()` what is a _projection_?

Make sure MongoDB is installed and running, if it is not you can install it with `brew install mongodb` and then run it with `mongod`. Spend the next few minutes either at the Mongo console (by typing `mongo` at the command line) or using [Robomongo](http://robomongo.org/). First create a database, then create a collection, then complete CRUD for an entity in that collection.

##### Querying

(Definition) [Query](http://www.merriam-webster.com/dictionary/query) - a question or a request for information about something. A database query is no different, it is simply the process of requesting information that was previously stored in the database. In particular with MongoDB, the query client is written in JavaScript, the second exercise explores the MongoDB query console.
 
### First Exercise

Work through [Modeling Data](https://github.com/gSchool/modeling-data).

### Second Exercise: Global Conglomerate Merchandise Analyst

Complete [Querying and aggregation with MongoDB](https://github.com/gSchool/mongodb-introduction-to-querying-and-aggregation) exercise.

## Additional Resources

[Intro to MongoDB and the Shell](https://github.com/gSchool/mongo-intro-shell)